# 🔍 Kubernetes ELK Monitoring Stack (Local - with Logstash)

This project demonstrates how to set up an **ELK stack (Elasticsearch, Logstash, Kibana)** in a local Kubernetes cluster (e.g., Minikube) to collect and visualize logs from a sample application.

---

## 🧱 Components Overview

### 1. **Flask App**
- Simple Python app that logs to `stdout`
- Logs redirected to files in a shared volume (for Logstash to read)

### 2. **Logstash**
- Reads logs from a mounted volume
- Parses and forwards logs to Elasticsearch
- Configured via Kubernetes ConfigMap

### 3. **Elasticsearch**
- Stores logs indexed by Logstash
- Deployed as a StatefulSet with a persistent volume

### 4. **Kibana**
- UI for searching and visualizing logs
- Connects to the internal Elasticsearch service

---

## 🚀 How to Deploy

### 1. Start Minikube
```bash
minikube start
```

### 2. Enable Minikube Docker Env
```bash
eval $(minikube docker-env)
```

### 3. Build App Image
```bash
docker build -t flask-log-app ./app
```

### 4. Apply All Kubernetes Resources
```bash
kubectl apply -f elasticsearch/
kubectl apply -f kibana/
kubectl apply -f logstash/
kubectl apply -f app/
```

---

## 🌐 Access Services

```bash
minikube service kibana --url
```

- Navigate to the Kibana URL
- Go to "Discover"
- Select the default index (e.g., `logstash-*`)

---

## 📁 Project Structure

```text
k8s-elk-monitoring/
├── app/               # Flask log-generating app
├── elasticsearch/     # Elasticsearch StatefulSet and service
├── kibana/            # Kibana deployment and service
├── logstash/          # Logstash configmap, deployment, and service
└── README.md
```
---

## 📊 Import Kibana Dashboard (Manual)

After accessing Kibana:

1. Navigate to **Stack Management → Saved Objects**
2. Click **Import**
3. Select `kibana-dashboard.ndjson` from this repo
4. Create or select the index pattern `logstash-*`
5. Open **Dashboard** → "Flask Logs Overview"

📁 Dashboard file:
- `kibana/kibana-dashboard.ndjson`

You should now see log entries generated by the Flask app, plotted over time.
